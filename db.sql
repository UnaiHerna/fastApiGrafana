#CREATE DATABASE datos;
#USE datos;
DROP TABLE IF EXISTS relacion;
DROP TABLE IF EXISTS elemento;
DROP TABLE IF EXISTS receptor;

CREATE TABLE elemento (
    id INT NOT NULL PRIMARY KEY,
    simbolo VARCHAR(10),
    u_medida VARCHAR(10),
    descripcion VARCHAR(50)
);

CREATE TABLE receptor (
    id INT NOT NULL PRIMARY KEY,
    timestamp DATETIME,
    valor FLOAT
);

CREATE TABLE relacion (
    id_receptor INT NOT NULL, 
    id_elemento INT NOT NULL,
    PRIMARY KEY (id_receptor, id_elemento),
    FOREIGN KEY (id_receptor) REFERENCES receptor(id),
    FOREIGN KEY (id_elemento) REFERENCES elemento(id)
);

INSERT INTO elemento (id, simbolo, u_medida, descripcion) VALUES
(1, 'OD', 'mg/L', 'Oxígeno Disuelto'),
(2, 'NH4', 'mg/L', 'Amonio'),
(3, 'NO3', 'mg/L', 'Nitrato'),
(4, 'MLSS', 'g/L', 'Sólidos Suspendidos Totales');

INSERT INTO receptor (id, timestamp, valor) VALUES
(1, '2023-07-01 08:00:00', 5.2),
(2, '2023-07-01 08:05:00', 4.8),
(3, '2023-07-01 08:10:00', 5.0),
(4, '2023-07-01 08:15:00', 4.9),
(5, '2023-07-01 08:20:00', 5.1),
(6, '2023-07-01 08:25:00', 4.7),
(7, '2023-07-01 08:30:00', 5.3),
(8, '2023-07-01 08:35:00', 4.6),
(9, '2023-07-01 08:40:00', 5.4),
(10, '2023-07-01 08:45:00', 4.5),
(11, '2023-07-01 08:50:00', 5.0),
(12, '2023-07-01 08:55:00', 4.9),
(13, '2023-07-01 09:00:00', 5.2),
(14, '2023-07-01 09:05:00', 4.8),
(15, '2023-07-01 09:10:00', 5.0),
(16, '2023-07-01 09:15:00', 4.9),
(17, '2023-07-01 09:20:00', 5.1),
(18, '2023-07-01 09:25:00', 4.7),
(19, '2023-07-01 09:30:00', 5.3),
(20, '2023-07-01 09:35:00', 4.6),
(21, '2023-07-01 09:40:00', 5.4),
(22, '2023-07-01 09:45:00', 4.5),
(23, '2023-07-01 09:50:00', 5.0),
(24, '2023-07-01 09:55:00', 4.9),
(25, '2023-07-01 10:00:00', 5.2),
(26, '2023-07-01 10:05:00', 4.8),
(27, '2023-07-01 10:10:00', 5.0),
(28, '2023-07-01 10:15:00', 4.9),
(29, '2023-07-01 10:20:00', 5.1),
(30, '2023-07-01 10:25:00', 4.7),
(31, '2023-07-01 10:30:00', 5.3),
(32, '2023-07-01 10:35:00', 4.6),
(33, '2023-07-01 10:40:00', 5.4),
(34, '2023-07-01 10:45:00', 4.5),
(35, '2023-07-01 10:50:00', 5.0),
(36, '2023-07-01 10:55:00', 4.9),
(37, '2023-07-01 11:00:00', 5.2),
(38, '2023-07-01 11:05:00', 4.8),
(39, '2023-07-01 11:10:00', 5.0),
(40, '2023-07-01 11:15:00', 4.9),
(41, '2023-07-01 11:20:00', 5.1),
(42, '2023-07-01 11:25:00', 4.7),
(43, '2023-07-01 11:30:00', 5.3),
(44, '2023-07-01 11:35:00', 4.6),
(45, '2023-07-01 11:40:00', 5.4),
(46, '2023-07-01 11:45:00', 4.5),
(47, '2023-07-01 11:50:00', 5.0),
(48, '2023-07-01 11:55:00', 4.9),
(49, '2023-07-01 12:00:00', 5.2),
(50, '2023-07-01 12:05:00', 4.8);

INSERT INTO relacion (id_receptor, id_elemento) VALUES
(1, 1),
(2, 2),
(3, 3),
(4, 4),
(5, 1),
(6, 2),
(7, 3),
(8, 4),
(9, 1),
(10, 2),
(11, 3),
(12, 4),
(13, 1),
(14, 2),
(15, 3),
(16, 4),
(17, 1),
(18, 2),
(19, 3),
(20, 4),
(21, 1),
(22, 2),
(23, 3),
(24, 4),
(25, 1),
(26, 2),
(27, 3),
(28, 4),
(29, 1),
(30, 2),
(31, 3),
(32, 4),
(33, 1),
(34, 2),
(35, 3),
(36, 4),
(37, 1),
(38, 2),
(39, 3),
(40, 4),
(41, 1),
(42, 2),
(43, 3),
(44, 4),
(45, 1),
(46, 2),
(47, 3),
(48, 4),
(49, 1),
(50, 2);

SELECT r.id, r.timestamp, e.simbolo, r.valor
FROM relacion re
JOIN receptor r ON r.id=re.id_receptor
JOIN elemento e ON e.id=re.id_elemento;
